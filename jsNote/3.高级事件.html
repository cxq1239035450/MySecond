<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/imgs/favicon.png"><title>高级事件 | 前端学习笔记</title><meta name="description" content="个人笔记汇总">
    <link rel="modulepreload" href="/notes/assets/app.d39b1afc.js"><link rel="modulepreload" href="/notes/assets/3.高级事件.html.91e42bbb.js"><link rel="modulepreload" href="/notes/assets/3.高级事件.html.311e47d2.js">
    <link rel="stylesheet" href="/notes/assets/style.7e6ace9e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/notes/" class=""><img class="logo" src="/notes/imgs/favicon.png" alt="前端学习笔记"><span class="site-name can-hide">前端学习笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/notes/htmlNote/" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/cssNote/" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/jsNote/" class="router-link-active" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/requestNote/" class="" aria-label="request"><!--[--><!--]--> request <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/vueNote/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/reactNote/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/other/" class="" aria-label="Other"><!--[--><!--]--> Other <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/notes/htmlNote/" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/cssNote/" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/jsNote/" class="router-link-active" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/requestNote/" class="" aria-label="request"><!--[--><!--]--> request <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/vueNote/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/reactNote/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/other/" class="" aria-label="Other"><!--[--><!--]--> Other <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">JS <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/notes/jsNote/" class="router-link-active sidebar-item" aria-label="JS介绍"><!--[--><!--]--> JS介绍 <!--[--><!--]--></a><!----></li><li><a href="/notes/jsNote/1.JS%E5%9F%BA%E7%A1%80.html" class="sidebar-item" aria-label="JS基础"><!--[--><!--]--> JS基础 <!--[--><!--]--></a><!----></li><li><a href="/notes/jsNote/2.DOM%E5%85%83%E7%B4%A0.html" class="sidebar-item" aria-label="DOM元素"><!--[--><!--]--> DOM元素 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsNote/3.%E9%AB%98%E7%BA%A7%E4%BA%8B%E4%BB%B6.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="高级事件"><!--[--><!--]--> 高级事件 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/jsNote/3.%E9%AB%98%E7%BA%A7%E4%BA%8B%E4%BB%B6.html#一-注册事件-绑定事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="一.注册事件(绑定事件)"><!--[--><!--]--> 一.注册事件(绑定事件) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsNote/3.%E9%AB%98%E7%BA%A7%E4%BA%8B%E4%BB%B6.html#二-删除事件-解绑事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="二.删除事件(解绑事件)"><!--[--><!--]--> 二.删除事件(解绑事件) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsNote/3.%E9%AB%98%E7%BA%A7%E4%BA%8B%E4%BB%B6.html#三-事件处理流" class="router-link-active router-link-exact-active sidebar-item" aria-label="三.事件处理流"><!--[--><!--]--> 三.事件处理流 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsNote/3.%E9%AB%98%E7%BA%A7%E4%BA%8B%E4%BB%B6.html#四-事件对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="四.事件对象"><!--[--><!--]--> 四.事件对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsNote/3.%E9%AB%98%E7%BA%A7%E4%BA%8B%E4%BB%B6.html#五-事件委托" class="router-link-active router-link-exact-active sidebar-item" aria-label="五.事件委托"><!--[--><!--]--> 五.事件委托 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsNote/3.%E9%AB%98%E7%BA%A7%E4%BA%8B%E4%BB%B6.html#六-常见的鼠标事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="六.常见的鼠标事件"><!--[--><!--]--> 六.常见的鼠标事件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/jsNote/3.%E9%AB%98%E7%BA%A7%E4%BA%8B%E4%BB%B6.html#七-常用的键盘事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="七.常用的键盘事件"><!--[--><!--]--> 七.常用的键盘事件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/notes/jsNote/4.BOM%E5%85%83%E7%B4%A0.html" class="sidebar-item" aria-label="BOM元素"><!--[--><!--]--> BOM元素 <!--[--><!--]--></a><!----></li><li><a href="/notes/jsNote/5.JS%E8%BF%9B%E9%98%B6-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1.html" class="sidebar-item" aria-label="JS高级"><!--[--><!--]--> JS高级 <!--[--><!--]--></a><!----></li><li><a href="/notes/jsNote/6.%E6%89%A9%E5%B1%95%E7%A7%BB%E5%8A%A8PC.html" class="sidebar-item" aria-label="移动端JS"><!--[--><!--]--> 移动端JS <!--[--><!--]--></a><!----></li><li><a href="/notes/jsNote/ES6-ES11.html" class="sidebar-item" aria-label="ES6 - ES11"><!--[--><!--]--> ES6 - ES11 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="高级事件" tabindex="-1"><a class="header-anchor" href="#高级事件" aria-hidden="true">#</a> 高级事件</h1><h3 id="一-注册事件-绑定事件" tabindex="-1"><a class="header-anchor" href="#一-注册事件-绑定事件" aria-hidden="true">#</a> 一.注册事件(绑定事件)</h3><p>给元素添加事件，称为注册事件或者绑定事件。</p><p>注册事件有两种方式：传统方式和方法监听注册方式</p><table><thead><tr><th style="text-align:center;"><strong>传统注册方式</strong></th><th style="text-align:center;"><strong>方法监听注册方式</strong></th></tr></thead><tbody><tr><td style="text-align:center;">利用 on 开头的事件 onclick</td><td style="text-align:center;">w3c 标准推荐方式</td></tr><tr><td style="text-align:center;"><code>&lt;button onclick = &quot;alert(&quot;hi&quot;)&quot;&gt;&lt;/button&gt;</code></td><td style="text-align:center;">addEventListener() 它是一个方法</td></tr><tr><td style="text-align:center;">btn.onclick = function() {}</td><td style="text-align:center;">IE9 之前的 IE 不支持此方法，可使用 attachEvent() 代替</td></tr><tr><td style="text-align:center;">特点：注册事件的唯一性</td><td style="text-align:center;">特点：同一个元素同一个事件可以注册多个监听器</td></tr><tr><td style="text-align:center;">同一个元素同一个事件只能设置一个处理函数，最后注册的处理函数将会覆盖前面注册的处理函数</td><td style="text-align:center;">按注册顺序依次执行</td></tr></tbody></table><h4 id="_1-1-addeventlistener" tabindex="-1"><a class="header-anchor" href="#_1-1-addeventlistener" aria-hidden="true">#</a> 1.1 addEventListener()</h4><ul><li><code>eventTarget.addEventListener()</code>方法将指定的监听器注册到 eventTarget（目标对象）上</li><li>当该对象触发指定的事件时，就会执行事件处理函数</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>eventTarget<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">,</span>useCapture<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>该方法接收三个参数：</p><ul><li><code>type</code>:事件类型字符串，比如click,mouseover,注意这里不要带on</li><li><code>listener</code>：事件处理函数，事件发生时，会调用该监听函数</li><li><code>useCapture</code>：可选参数，是一个布尔值，默认是 false。学完 DOM 事件流后，我们再进一步学习</li></ul><h4 id="_1-2-attachevent" tabindex="-1"><a class="header-anchor" href="#_1-2-attachevent" aria-hidden="true">#</a> 1.2 attachEvent()</h4><ul><li><code>eventTarget.attachEvent()</code>方法将指定的监听器注册到 eventTarget（目标对象） 上</li><li>当该对象触发指定的事件时，指定的回调函数就会被执行</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">&#39;onclick&#39;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>该方法接收两个参数：</p><ul><li><code>eventNameWithOn</code>：事件类型字符串，比如 onclick 、onmouseover ，这里要带 on</li><li><code>callback</code>： 事件处理函数，当目标触发事件时回调函数被调用</li><li>ie9以前的版本支持</li></ul><h3 id="二-删除事件-解绑事件" tabindex="-1"><a class="header-anchor" href="#二-删除事件-解绑事件" aria-hidden="true">#</a> 二.删除事件(解绑事件)</h3><h4 id="_2-1-removeeventlistener" tabindex="-1"><a class="header-anchor" href="#_2-1-removeeventlistener" aria-hidden="true">#</a> 2.1 removeEventListener()</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>eventTarget<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>listener<span class="token punctuation">[</span><span class="token punctuation">,</span>useCapture<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>type</code>:事件类型字符串，比如click,mouseover,注意这里不要带on</li><li><code>listener</code>：事件处理函数</li><li><code>useCapture</code>：可选参数，是一个布尔值，默认是 false。学完 DOM 事件流后，我们再进一步学习</li></ul><h4 id="_2-2-detachevent" tabindex="-1"><a class="header-anchor" href="#_2-2-detachevent" aria-hidden="true">#</a> 2.2 detachEvent()</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>eventTarget<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span>eventNameWithOn<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><code>eventNameWithOn</code>：事件类型字符串，比如 onclick 、onmouseover ，这里要带 on</li><li><code>callback</code>： 事件处理函数</li><li>ie9以前的版本支持</li></ul><h4 id="_2-3-传统事件删除方式" tabindex="-1"><a class="header-anchor" href="#_2-3-传统事件删除方式" aria-hidden="true">#</a> 2.3 传统事件删除方式</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>eventTarget<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="三-事件处理流" tabindex="-1"><a class="header-anchor" href="#三-事件处理流" aria-hidden="true">#</a> 三.事件处理流</h3><ul><li>事件流描述的是从页面中接收事件的顺序</li><li>事件发生时会在元素节点之间按照特定的顺序传播，这个传播过程即DOM事件流</li></ul><p><img src="/notes/image/事件流.png" alt="事件流"></p><ul><li>事件冒泡： IE 最早提出，事件开始时由最具体的元素接收，然后逐级向上传播到到 DOM 最顶层节点的过程。</li><li>事件捕获： 网景最早提出，由 DOM 最顶层节点开始，然后逐级向下传播到到最具体的元素接收的过程。</li></ul><p><img src="/notes/image/事件流1.png" alt="事件流1"></p><h4 id="_3-1-事件捕获阶段" tabindex="-1"><a class="header-anchor" href="#_3-1-事件捕获阶段" aria-hidden="true">#</a> 3.1 事件捕获阶段</h4><ul><li>document -&gt; html -&gt; body -&gt; father -&gt; son</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;father&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;son&quot;</span><span class="token operator">&gt;</span>son盒子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token comment">// dom 事件流 三个阶段</span>
        <span class="token comment">// 1. JS 代码中只能执行捕获或者冒泡其中的一个阶段。</span>
        <span class="token comment">// 2. onclick 和 attachEvent（ie） 只能得到冒泡阶段。</span>
        <span class="token comment">// 3. 捕获阶段 如果addEventListener 第三个参数是 true 那么则处于捕获阶段  document -&gt; html -&gt; body -&gt; father -&gt; son</span>
        <span class="token keyword">var</span> son <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.son&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        son<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;son&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> father <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.father&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        father<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;father&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//点击son盒子执行时,先弹出father 在弹出son</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>这是因为捕获阶段由 DOM 最顶层节点开始，然后逐级向下传播到到最具体的元素接收</p><p>document -&gt; html -&gt; body -&gt; father -&gt; son</p><p>先看 document 的事件，没有；再看 html 的事件，没有；再看 body 的事件，没有；再看 father 的事件，有就先执行；再看 son 的事件，再执行。</p><h4 id="_3-2-事件冒泡阶段" tabindex="-1"><a class="header-anchor" href="#_3-2-事件冒泡阶段" aria-hidden="true">#</a> 3.2 事件冒泡阶段</h4><ul><li>son -&gt; father -&gt;body -&gt; html -&gt; document</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;father&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;son&quot;</span><span class="token operator">&gt;</span>son盒子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
		<span class="token comment">// 4. 冒泡阶段 如果addEventListener 第三个参数是 false 或者 省略 那么则处于冒泡阶段  son -&gt; father -&gt;body -&gt; html -&gt; document</span>
        <span class="token keyword">var</span> son <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.son&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        son<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;son&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> father <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.father&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        father<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;father&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;document&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//点击son盒子时,执行顺序为 先弹出son,再弹出father,最后才是document</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>这是因为冒泡阶段开始时由最具体的元素接收，然后逐级向上传播到到 DOM 最顶层节点</p><ul><li>son -&gt; father -&gt;body -&gt; html -&gt; document</li></ul><h4 id="_3-3-小结" tabindex="-1"><a class="header-anchor" href="#_3-3-小结" aria-hidden="true">#</a> 3.3 小结</h4><p>(1) JS 代码中只能执行捕获或者冒泡其中的一个阶段</p><p>(2) onclick 和 attachEvent只能得到冒泡阶段</p><p>(3) addEventListener(type,listener[,useCapture])第三个参数如果是 true，表示在事件捕获阶段调用事件处理程序；如果是 false (不写默认就是false),表示在事件冒泡阶段调用事件处理程序</p><p>(4) 实际开发中我们很少使用事件捕获，我们更关注事件冒泡。</p><p>(5) 有些事件是没有冒泡的，比如 onblur、onfocus、onmouseenter、onmouseleave</p><h3 id="四-事件对象" tabindex="-1"><a class="header-anchor" href="#四-事件对象" aria-hidden="true">#</a> 四.事件对象</h3><ul><li><p>官方解释：event 对象代表事件的状态，比如键盘按键的状态、鼠标的位置、鼠标按钮的状态</p></li><li><p>简单理解：</p></li><li><p>事件发生后，跟事件相关的一系列信息数据的集合都放到这个对象里面</p></li><li><p>这个对象就是事件对象 event，它有很多属性和方法，比如“</p><ul><li>谁绑定了这个事件</li><li>鼠标触发事件的话，会得到鼠标的相关信息，如鼠标位置</li><li>键盘触发事件的话，会得到键盘的相关信息，如按了哪个键</li></ul></li><li><p>这个 event 是个形参，系统帮我们设定为事件对象，不需要传递实参过去</p></li><li><p>当我们注册事件时， event 对象就会被系统自动创建，并依次传递给事件监听器（事件处理函数）</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">123</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token comment">// 事件对象</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// console.log(e);</span>
                <span class="token comment">// console.log(window.event);</span>
                <span class="token comment">// e = e || window.event;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token comment">// 1. event 就是一个事件对象 写到我们侦听函数的 小括号里面 当形参来看</span>
        <span class="token comment">// 2. 事件对象只有有了事件才会存在，它是系统给我们自动创建的，不需要我们传递参数</span>
        <span class="token comment">// 3. 事件对象 是 我们事件的一系列相关数据的集合 跟事件相关的 比如鼠标点击里面就包含了鼠标的相关信息，鼠标坐标啊，如果是键盘事件里面就包含的键盘事件的信息 比如 判断用户按下了那个键</span>
        <span class="token comment">// 4. 这个事件对象我们可以自己命名 比如 event 、 evt、 e</span>
        <span class="token comment">// 5. 事件对象也有兼容性问题 ie678 通过 window.event 兼容性的写法  e = e || window.event;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="_4-1-事件对象的兼容性方案" tabindex="-1"><a class="header-anchor" href="#_4-1-事件对象的兼容性方案" aria-hidden="true">#</a> 4.1 事件对象的兼容性方案</h4><p>事件对象本身的获取存在兼容问题：</p><ol><li><p>标准浏览器中是浏览器给方法传递的参数，只需要定义形参 e 就可以获取到。</p></li><li><p>在 IE6~8 中，浏览器不会给方法传递参数，如果需要的话，需要到 window.event 中获取查找</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span><span class="token comment">//解决</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h4 id="_4-2-事件对象的常见属性和方法" tabindex="-1"><a class="header-anchor" href="#_4-2-事件对象的常见属性和方法" aria-hidden="true">#</a> 4.2 事件对象的常见属性和方法</h4><table><thead><tr><th style="text-align:center;"><strong>事件对象属性方法</strong></th><th style="text-align:center;"><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:center;">e.target</td><td style="text-align:center;">返回触发事件的对象 标准</td></tr><tr><td style="text-align:center;">e.srcElement</td><td style="text-align:center;">返回触发事件的对象 非标准 ie6-8使用</td></tr><tr><td style="text-align:center;">e.type</td><td style="text-align:center;">返回事件的类型 比如<code>click</code> <code>mouseover</code> 不带on</td></tr><tr><td style="text-align:center;">e.cancelBubble</td><td style="text-align:center;">该属性阻止冒泡，非标准，ie6-8使用</td></tr><tr><td style="text-align:center;">e.returnValue</td><td style="text-align:center;">该属性阻止默认行为 非标准，ie6-8使用</td></tr><tr><td style="text-align:center;">e.preventDefault()</td><td style="text-align:center;">该方法阻止默认行为 标准 比如不让链接跳转</td></tr><tr><td style="text-align:center;">e.stopPropagation()</td><td style="text-align:center;">阻止冒泡 标准</td></tr></tbody></table><p>e.target 和 this 的区别：</p><ul><li>this 是事件绑定的元素， 这个函数的调用者（绑定这个事件的元素）</li><li>e.target 是事件触发的元素。</li></ul><h3 id="五-事件委托" tabindex="-1"><a class="header-anchor" href="#五-事件委托" aria-hidden="true">#</a> 五.事件委托</h3><ul><li><p>事件委托也称为事件代理，在 jQuery 里面称为事件委派</p></li><li><p>事件委托的原理:</p></li><li><p><strong>不是每个子节点单独设置事件监听器，而是事件监听器设置在其父节点上，然后利用冒泡原理影响设置每个子节点</strong></p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token comment">// 事件委托的核心原理：给父节点添加侦听器， 利用事件冒泡影响每一个子节点</span>
        <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;ul&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// alert(&#39;知否知否，点我应有弹框在手！&#39;);</span>
            <span class="token comment">// e.target 这个可以得到我们点击的对象</span>
            e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">&#39;pink&#39;</span><span class="token punctuation">;</span>
            <span class="token comment">// 点了谁，就让谁的style里面的backgroundColor颜色变为pink</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>以上案例：给 ul 注册点击事件，然后利用事件对象的 target 来找到当前点击的 li，因为点击 li，事件会冒泡到 ul 上， ul 有注册事件，就会触发事件监听器。</p><h3 id="六-常见的鼠标事件" tabindex="-1"><a class="header-anchor" href="#六-常见的鼠标事件" aria-hidden="true">#</a> 六.常见的鼠标事件</h3><table><thead><tr><th style="text-align:center;"><strong>鼠标事件</strong></th><th style="text-align:center;"><strong>触发条件</strong></th></tr></thead><tbody><tr><td style="text-align:center;">onclick</td><td style="text-align:center;">鼠标点击左键触发</td></tr><tr><td style="text-align:center;">onmouseover</td><td style="text-align:center;">鼠标经过触发</td></tr><tr><td style="text-align:center;">onmouseout</td><td style="text-align:center;">鼠标离开触发</td></tr><tr><td style="text-align:center;">onfocus</td><td style="text-align:center;">获得鼠标焦点触发</td></tr><tr><td style="text-align:center;">onblur</td><td style="text-align:center;">失去鼠标焦点触发</td></tr><tr><td style="text-align:center;">onmousemove</td><td style="text-align:center;">鼠标移动触发</td></tr><tr><td style="text-align:center;">onmouseup</td><td style="text-align:center;">鼠标弹起触发</td></tr><tr><td style="text-align:center;">onmousedown</td><td style="text-align:center;">鼠标按下触发</td></tr></tbody></table><h4 id="_6-1-禁止鼠标右键与鼠标选中" tabindex="-1"><a class="header-anchor" href="#_6-1-禁止鼠标右键与鼠标选中" aria-hidden="true">#</a> 6.1 禁止鼠标右键与鼠标选中</h4><ul><li><code>contextmenu</code>主要控制应该何时显示上下文菜单，主要用于程序员取消默认的上下文菜单</li><li><code>selectstart</code> 禁止鼠标选中</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>我是一段不愿意分享的文字<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token comment">// 1. contextmenu 我们可以禁用右键菜单</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;contextmenu&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻止默认行为</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token comment">// 2. 禁止选中文字 selectstart</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;selectstart&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_6-2-鼠标事件对象" tabindex="-1"><a class="header-anchor" href="#_6-2-鼠标事件对象" aria-hidden="true">#</a> 6.2 鼠标事件对象</h4><ul><li><strong>event</strong>对象代表事件的状态，跟事件相关的一系列信息的集合</li><li>现阶段我们主要是用鼠标事件对象 <strong>MouseEvent</strong> 和键盘事件对象 <strong>KeyboardEvent。</strong></li></ul><table><thead><tr><th style="text-align:center;"><strong>鼠标事件对象</strong></th><th style="text-align:center;"><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:center;">e.clientX</td><td style="text-align:center;">返回鼠标相对于浏览器窗口<strong>可视区</strong>的X坐标</td></tr><tr><td style="text-align:center;">e.clientY</td><td style="text-align:center;">返回鼠标相对于浏览器窗口<strong>可视区</strong>的Y坐标</td></tr><tr><td style="text-align:center;">e.pageX（重点）</td><td style="text-align:center;">返回鼠标相对于文档页面的X坐标 IE9+ 支持</td></tr><tr><td style="text-align:center;">e.pageY（重点）</td><td style="text-align:center;">返回鼠标相对于文档页面的Y坐标 IE9+ 支持</td></tr><tr><td style="text-align:center;">e.screenX</td><td style="text-align:center;">返回鼠标相对于电脑屏幕的X坐标</td></tr><tr><td style="text-align:center;">e.screenY</td><td style="text-align:center;">返回鼠标相对于电脑屏幕的Y坐标</td></tr></tbody></table><h3 id="七-常用的键盘事件" tabindex="-1"><a class="header-anchor" href="#七-常用的键盘事件" aria-hidden="true">#</a> 七.常用的键盘事件</h3><table><thead><tr><th style="text-align:center;"><strong>键盘事件</strong></th><th style="text-align:center;"><strong>触发条件</strong></th></tr></thead><tbody><tr><td style="text-align:center;">onkeyup</td><td style="text-align:center;">某个键盘按键被松开时触发</td></tr><tr><td style="text-align:center;">onkeydown</td><td style="text-align:center;">某个键盘按键被按下时触发</td></tr><tr><td style="text-align:center;">onkeypress</td><td style="text-align:center;">某个键盘按键被按下时触发，但是它不识别功能键，比如 ctrl shift 箭头等</td></tr></tbody></table><ul><li><strong>如果使用addEventListener 不需要加 on</strong></li><li><code>onkeypress</code> 和前面2个的区别是，它不识别功能键，比如左右箭头，shift 等</li><li>三个事件的执行顺序是： keydown – keypress — keyup</li></ul><h4 id="_7-1-键盘对象属性" tabindex="-1"><a class="header-anchor" href="#_7-1-键盘对象属性" aria-hidden="true">#</a> 7.1 键盘对象属性</h4><table><thead><tr><th style="text-align:center;">键盘事件对象属性</th><th style="text-align:center;"><strong>说明</strong></th></tr></thead><tbody><tr><td style="text-align:center;">keyCode</td><td style="text-align:center;">返回该<strong>键</strong>值的ASCII值</td></tr></tbody></table><ul><li><code>onkeydown</code>和 <code>onkeyup</code> 不区分字母大小写，<code>onkeypress</code> 区分字母大小写。</li><li>在我们实际开发中，我们更多的使用keydown和keyup， 它能识别所有的键（包括功能键）</li><li><code>Keypress</code> 不识别功能键，但是<code>keyCode</code>属性能区分大小写，返回不同的ASCII值</li></ul><p><strong>注意点</strong></p><p>keydown和keypress在文本框里面的特点:他们两个事件触发的时候,文字还 没有落入文本框中。 keyup事件触发的时候，文字已经落入文本框里面了</p><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/notes/jsNote/2.DOM%E5%85%83%E7%B4%A0.html" class="" aria-label="DOM元素"><!--[--><!--]--> DOM元素 <!--[--><!--]--></a></span><span class="next"><a href="/notes/jsNote/4.BOM%E5%85%83%E7%B4%A0.html" class="" aria-label="BOM元素"><!--[--><!--]--> BOM元素 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/notes/assets/app.d39b1afc.js" defer></script>
  </body>
</html>
