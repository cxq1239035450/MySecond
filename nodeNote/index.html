<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/imgs/favicon.png"><title>Node 基础 | 前端学习笔记</title><meta name="description" content="个人笔记汇总">
    <link rel="modulepreload" href="/notes/assets/app.a5197ba9.js"><link rel="modulepreload" href="/notes/assets/index.html.51d1d7b5.js"><link rel="modulepreload" href="/notes/assets/index.html.5722457a.js">
    <link rel="stylesheet" href="/notes/assets/style.7e6ace9e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/notes/" class=""><img class="logo" src="/notes/imgs/favicon.png" alt="前端学习笔记"><span class="site-name can-hide">前端学习笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/notes/htmlNote/" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/cssNote/" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/jsNote/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/requestNote/" class="" aria-label="request"><!--[--><!--]--> request <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/vueNote/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/reactNote/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a aria-current="page" href="/notes/nodeNote/" class="router-link-active router-link-exact-active router-link-active" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/other/" class="" aria-label="Other"><!--[--><!--]--> Other <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/notes/htmlNote/" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/cssNote/" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/jsNote/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/requestNote/" class="" aria-label="request"><!--[--><!--]--> request <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/vueNote/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/reactNote/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a aria-current="page" href="/notes/nodeNote/" class="router-link-active router-link-exact-active router-link-active" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/notes/other/" class="" aria-label="Other"><!--[--><!--]--> Other <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Node <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Node 基础"><!--[--><!--]--> Node 基础 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_1-1-官方定义" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1 官方定义"><!--[--><!--]--> 1.1 官方定义 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_1-2-node-js-的组成" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 Node.js 的组成"><!--[--><!--]--> 1.2 Node.js 的组成 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_1-3-总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3 总结"><!--[--><!--]--> 1.3 总结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_2-1-buffer-缓冲器" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 Buffer（缓冲器）"><!--[--><!--]--> 2.1 Buffer（缓冲器） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_1-概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 概念"><!--[--><!--]--> 1. 概念 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_2-特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 特点"><!--[--><!--]--> 2. 特点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_3-使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 使用"><!--[--><!--]--> 3. 使用 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_3-2buffer-与字符串的转化" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2Buffer 与字符串的转化"><!--[--><!--]--> 3.2Buffer 与字符串的转化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_3-3buffer-的读写" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3Buffer 的读写"><!--[--><!--]--> 3.3Buffer 的读写 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_2-2-进程与线程" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 进程与线程"><!--[--><!--]--> 2.2 进程与线程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_2-3-模块化" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3 模块化"><!--[--><!--]--> 2.3 模块化 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_2-3-1-commonjs-规范" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3.1 CommonJs 规范"><!--[--><!--]--> 2.3.1 CommonJs 规范 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_2-3-2-amd-规范" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3.2 AMD 规范"><!--[--><!--]--> 2.3.2 AMD 规范 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_2-3-3-cmd-规范" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3.3 CMD 规范"><!--[--><!--]--> 2.3.3 CMD 规范 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_2-3-4-es6-规范" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3.4 ES6 规范"><!--[--><!--]--> 2.3.4 ES6 规范 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_2-3-5-区分-require-和-import" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3.5 区分 require 和 import"><!--[--><!--]--> 2.3.5 区分 require 和 import <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_3-node-模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.node 模块"><!--[--><!--]--> 3.node 模块 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_3-1-fs-模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 FS 模块"><!--[--><!--]--> 3.1 FS 模块 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_3-2-path-模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 path 模块"><!--[--><!--]--> 3.2 path 模块 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_3-3-http-模块" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3 http 模块"><!--[--><!--]--> 3.3 http 模块 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_3-4-模块化" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4 模块化"><!--[--><!--]--> 3.4 模块化 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_4-包管理工具" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.包管理工具"><!--[--><!--]--> 4.包管理工具 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_4-1-包是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1 包是什么"><!--[--><!--]--> 4.1 包是什么 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_4-2-常用的包管理工具" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2 常用的包管理工具"><!--[--><!--]--> 4.2 常用的包管理工具 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_4-3-项目初始化" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3 项目初始化"><!--[--><!--]--> 4.3 项目初始化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_4-4-生产环境与开发环境" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4 生产环境与开发环境"><!--[--><!--]--> 4.4 生产环境与开发环境 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_5-nvm" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.NVM"><!--[--><!--]--> 5.NVM <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_5-1-常用命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1 常用命令"><!--[--><!--]--> 5.1 常用命令 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_6-会话控制" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.会话控制"><!--[--><!--]--> 6.会话控制 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_6-1-介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1 介绍"><!--[--><!--]--> 6.1 介绍 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_6-2-cookie" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2 cookie"><!--[--><!--]--> 6.2 cookie <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_6-2-1-cookie-是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2.1 cookie 是什么"><!--[--><!--]--> 6.2.1 cookie 是什么 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_6-2-2-cookie-的特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2.2 cookie 的特点"><!--[--><!--]--> 6.2.2 cookie 的特点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_6-2-3-浏览器操作-cookie" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2.3 浏览器操作 cookie"><!--[--><!--]--> 6.2.3 浏览器操作 cookie <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_6-3-session" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.3 session"><!--[--><!--]--> 6.3 session <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_6-3-1-session-是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.3.1 session 是什么"><!--[--><!--]--> 6.3.1 session 是什么 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_6-3-2-session-的作用" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.3.2 session 的作用"><!--[--><!--]--> 6.3.2 session 的作用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_6-3-3-session-运行流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.3.3 session 运行流程"><!--[--><!--]--> 6.3.3 session 运行流程 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_6-4-token" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.4 token"><!--[--><!--]--> 6.4 token <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_6-4-1-token-是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.4.1 token 是什么"><!--[--><!--]--> 6.4.1 token 是什么 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_6-4-2-token-的作用" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.4.2 token 的作用"><!--[--><!--]--> 6.4.2 token 的作用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_6-4-3-token-的工作流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.4.3 token 的工作流程"><!--[--><!--]--> 6.4.3 token 的工作流程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_6-5-区别和特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.5 区别和特点"><!--[--><!--]--> 6.5 区别和特点 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/notes/nodeNote/#_7-jwt" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.JWT"><!--[--><!--]--> 7.JWT <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/notes/nodeNote/#_8-域名" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.域名"><!--[--><!--]--> 8.域名 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/notes/nodeNote/#_8-1本地域名" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.1本地域名"><!--[--><!--]--> 8.1本地域名 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/notes/nodeNote/express.html" class="sidebar-item" aria-label="Express"><!--[--><!--]--> Express <!--[--><!--]--></a><!----></li><li><a href="/notes/nodeNote/koa.html" class="sidebar-item" aria-label="Koa"><!--[--><!--]--> Koa <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="node-基础" tabindex="-1"><a class="header-anchor" href="#node-基础" aria-hidden="true">#</a> Node 基础</h1><h2 id="_1-1-官方定义" tabindex="-1"><a class="header-anchor" href="#_1-1-官方定义" aria-hidden="true">#</a> 1.1 官方定义</h2><p>Node.js 是一个基于 <strong>Chrome V8 引擎</strong>的 JavaScript 运行环境。Node.js 使用了一个<strong>事件驱动</strong>、<strong>非阻塞式 I/O</strong>的模型，使其轻量又高效。Node.js 的包管理工具 npm 是全球最大的开源库生态系统。</p><p>Node.js 不是一门语言，也不是 JavaScript 的框架，也不是像 Nginx 一样的 Web 服务器 ，<strong>Node.js 是 JavaScript 在服务器端的运行环境（平台）</strong>。</p><h2 id="_1-2-node-js-的组成" tabindex="-1"><a class="header-anchor" href="#_1-2-node-js-的组成" aria-hidden="true">#</a> 1.2 Node.js 的组成</h2><p>在 Node.js 里运行 JavaScript，跟在 Chrome 里运行 JavaScript 有什么不同？</p><p>二者采用的是同样的 JS 引擎。在 Node.js 里写 JS，和在前端写 JS，几乎没有不同。在写法上的区别在于：Node.js 没有浏览器、页面标签相关的 API，但是新增了一些 Node.js 相关的 API。通俗来说，对于开发者而言，在前端写 JS 是用于控制浏览器；而 Node.js 环境写 JS 可以控制整个计算机。</p><p>我们知道，JavaScript 的组成分为三个部分：</p><ul><li>ECMAScript</li><li>DOM：标签元素相关的 API</li><li>BOM：浏览器相关的 API</li></ul><p>ECMAScript 是 JS 的语法；DOM 和 BOM 浏览器端为 JS 提供的 API。</p><p>而 Node.js 的组成分为：</p><ul><li><strong>ECMAScript</strong>。ECMAScript 的所有语法在 Node 环境中都可以使用。</li><li><strong>Node 环境</strong>提供的一些<strong>附加 API</strong>(包括文件、网络等相关的 API)。</li></ul><p>如下图所示：</p><p><img src="/notes/image/node1.png" alt="node1"></p><h2 id="_1-3-总结" tabindex="-1"><a class="header-anchor" href="#_1-3-总结" aria-hidden="true">#</a> 1.3 总结</h2><p><strong>javaScript 顶级对象是 window</strong></p><p><strong>Node.js 顶级对象是 global 或 globalThis</strong></p><ul><li>Node 是一个服务器端 JavaScript 解释器</li><li>Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行环境</li><li>Node.js 使用了一个事件驱动、非阻塞式 I/O 的模型，使其轻量又高效</li><li>Node.js 的包管理器 npm，是全球最大的开源库生态系统</li><li>Node.js 是一门动态语言，运行在服务端的 Javascript</li></ul><h1 id="_2-后端基础知识" tabindex="-1"><a class="header-anchor" href="#_2-后端基础知识" aria-hidden="true">#</a> 2.后端基础知识</h1><h2 id="_2-1-buffer-缓冲器" tabindex="-1"><a class="header-anchor" href="#_2-1-buffer-缓冲器" aria-hidden="true">#</a> 2.1 Buffer（缓冲器）</h2><h2 id="_1-概念" tabindex="-1"><a class="header-anchor" href="#_1-概念" aria-hidden="true">#</a> <strong>1.</strong> <strong>概念</strong></h2><ul><li>Buffer 是一个类似于数组的 对象 ，用于表示固定长度的字节序列</li><li>Buffer 本质是一段内存空间，专门用来处理 二进制数据 。</li></ul><p><img src="/notes/image/node2.png" alt="node2"></p><h2 id="_2-特点" tabindex="-1"><a class="header-anchor" href="#_2-特点" aria-hidden="true">#</a> <strong>2.</strong> <strong>特点</strong></h2><ul><li><p>Buffer 大小固定且无法调整</p></li><li><p>Buffer 性能较好，可以直接对计算机内存进行操作</p></li><li><p>每个元素的大小为 1 字节(byte)</p></li></ul><p><img src="/notes/image/node3.png" alt="node3"></p><h2 id="_3-使用" tabindex="-1"><a class="header-anchor" href="#_3-使用" aria-hidden="true">#</a> <strong>3.</strong> <strong>使用</strong></h2><h4 id="_3-1创建-buffer" tabindex="-1"><a class="header-anchor" href="#_3-1创建-buffer" aria-hidden="true">#</a> 3.1<strong>创建 Buffer</strong></h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1</span><span class="token punctuation">.</span>Buffer<span class="token punctuation">.</span>alloc

<span class="token comment">//创建了一个长度为10字节的Buffer，相当于申请了10字节的内存空间，每个字节的值为0</span>
letbuf_1<span class="token operator">=</span>Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//结果为&lt;Buffer00000000000000000000&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">2</span><span class="token punctuation">.</span>Buffer<span class="token punctuation">.</span>allocUnsafe

<span class="token comment">//创建了一个长度为10字节的Buffer，buffer中可能存在旧的数据,可能会影响执行结果，所以叫unsafe</span>
letbuf_2<span class="token operator">=</span>Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">3</span><span class="token punctuation">.</span>Buffer<span class="token punctuation">.</span>from

<span class="token comment">//通过字符串创建Buffer</span>
letbuf_3<span class="token operator">=</span>Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//通过数组创建Buffer</span>
letbuf_4<span class="token operator">=</span>Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token number">108</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">118</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token number">121</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">117</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-2buffer-与字符串的转化" tabindex="-1"><a class="header-anchor" href="#_3-2buffer-与字符串的转化" aria-hidden="true">#</a> <strong>3.2Buffer 与字符串的转化</strong></h3><p>我们可以借助**toString()**方法将 Buffer 转为字符串</p><p>toString()默认是按照<strong>utf-8</strong>编码方式进行转换的。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> buf_4 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">118</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">121</span><span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf_4<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// iloveyou</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-3buffer-的读写" tabindex="-1"><a class="header-anchor" href="#_3-3buffer-的读写" aria-hidden="true">#</a> <strong>3.3Buffer 的读写</strong></h3><p>Buffer 可以直接通过 <strong>[ ]</strong> 的方式对数据进行处理。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> buf_3 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//读取</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf_3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//修改</span>
buf_3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">97</span>
<span class="token comment">//查看字符串结果</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf_3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>1.如果修改的数值超过 255 ，则超过 8 位数据会被舍弃</p><p>2.一个 UTF-8 的字符一般占 3 个字节</p><p>3.UTF-8 最少需要 8 个比特位也就是一个字节来存储， UTF-16 和 UTF-32 分别需要最少 2 个字节 和 4 个字节来存储</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> buf <span class="token operator">=</span> BUffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
buf<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">361</span> <span class="token comment">//舍弃高位的数字  361二进制为 0001 0110 1001  实际转化为 0110 1001</span>

<span class="token keyword">let</span> buf2 <span class="token operator">=</span> BUffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;你好&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span> <span class="token comment">//&lt;Buffer e4 bd a0 e5 a5 bd&gt; 一个中文三个字节</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_2-2-进程与线程" tabindex="-1"><a class="header-anchor" href="#_2-2-进程与线程" aria-hidden="true">#</a> 2.2 进程与线程</h2><ul><li><p>进程：是指一个内存中运行的应用程序(已经在内存中运行的程序). 一个进程都有一个独立的内存空间，一个电脑(手机)可以同时运行多个进程；进程也是程序的一次执行过程，是系统运行程序的基本单位；</p></li><li><p>线程：是进程中的一个执行单元(线程是依赖于进程的)，负责当前进程中程序的执行，一个进程中至少有一个线程(单线程程序)。一个进程中是可以有多个线程的，这个应用程序也可以称之为多线程程序。</p></li></ul><blockquote><p>并行：指两个或多个事件在同一时刻发生（同时发生 同时处理 执行者不是一个）。 并发：指两个或多个事件在同一个时间段内发生（交替的发生 执行者是一个）。</p></blockquote><h2 id="_2-3-模块化" tabindex="-1"><a class="header-anchor" href="#_2-3-模块化" aria-hidden="true">#</a> 2.3 模块化</h2><h3 id="_2-3-1-commonjs-规范" tabindex="-1"><a class="header-anchor" href="#_2-3-1-commonjs-规范" aria-hidden="true">#</a> 2.3.1 CommonJs 规范</h3><p>CommonJS 规范是 Node.js 最早提出的模块化规范，主要用于服务器端 JavaScript 的模块化开发。这个规范采用同步的方式加载模块，通过<code>require()</code>函数引入其他模块，通过<code>module.exports</code>或<code>exports</code>对象导出模块。例如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 引入模块</span>
<span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./moduleA&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 导出模块</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-3-2-amd-规范" tabindex="-1"><a class="header-anchor" href="#_2-3-2-amd-规范" aria-hidden="true">#</a> 2.3.2 AMD 规范</h3><p>AMD（Asynchronous Module Definition）规范是由 RequireJS 提出的模块化规范，主要用于浏览器端 JavaScript 的模块化开发。这个规范采用异步的方式加载模块，通过<code>define()</code>函数定义模块，通过<code>require()</code>函数引入其他模块。例如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 定义模块</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;moduleA&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">moduleA</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">b</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 引入模块</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;moduleB&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">moduleB</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_2-3-3-cmd-规范" tabindex="-1"><a class="header-anchor" href="#_2-3-3-cmd-规范" aria-hidden="true">#</a> 2.3.3 CMD 规范</h3><p>CMD（Common Module Definition）规范是由 SeaJS 提出的模块化规范，主要用于浏览器端 JavaScript 的模块化开发。这个规范与 AMD 类似，同样采用异步的方式加载模块，但是它的模块定义和引入方式与 AMD 有所不同。例如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 定义模块</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./moduleA&#39;</span><span class="token punctuation">)</span>

  exports<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
  exports<span class="token punctuation">.</span><span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 引入模块</span>
<span class="token keyword">const</span> moduleB <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;moduleB&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-3-4-es6-规范" tabindex="-1"><a class="header-anchor" href="#_2-3-4-es6-规范" aria-hidden="true">#</a> 2.3.4 ES6 规范</h3><p>import 是 es6 为 js 模块化提出的新的语法。 <strong>( nodejs 中使用文件名后缀得为 mjs)</strong></p><blockquote><p>import 是用于将某个模块中导出的函数或对象、初始值导入到另一个模块中的语法。 它必须放在文件开头，而且使用格式也是确定的，不容置疑。它不会将整个模块运行后赋值给某个变量，而是只选择 import 的接口进行编译，这样在性能上比 require 好很多。require 是赋值过程，import 是解构过程</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> defaultExport <span class="token keyword">from</span> <span class="token string">&#39;module-name&#39;</span> <span class="token comment">//导出默认的export default</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> name <span class="token keyword">from</span> <span class="token string">&#39;module-name&#39;</span> <span class="token comment">//导出默认的export default，并把所有的输出包裹到obj对象里</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> export1 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;module-name&#39;</span> <span class="token comment">//导出名为export1的模块</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> export1 <span class="token keyword">as</span> alias1 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;module-name&#39;</span> <span class="token comment">//导出名为export1的模块，并把export1的输出包裹到alias1对象里</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> export1<span class="token punctuation">,</span> export2 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;module-name&#39;</span> <span class="token comment">//导出名为export1、export2的模块</span>
<span class="token keyword">import</span> <span class="token string">&#39;test.js&#39;</span> <span class="token comment">//运行模块的全局代码，但实际上并不导入任何值</span>
<span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;module-name&#39;</span><span class="token punctuation">)</span> <span class="token comment">//动态导入模块</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-3-5-区分-require-和-import" tabindex="-1"><a class="header-anchor" href="#_2-3-5-区分-require-和-import" aria-hidden="true">#</a> 2.3.5 区分 require 和 import</h3><p><strong>require</strong></p><ul><li>通过 require 引入基础数据类型时，属于复制该变量。</li><li>通过 require 引入复杂数据类型时，数据浅拷贝该对象。+</li><li></li><li>出现模块之间的循环引用时，会输出已经执行的模块，而未执行的模块不输出（比较复杂）</li><li>CommonJS 模块默认 export 的是一个对象，即使导出的是基础数据类型</li><li><strong>require/exports 是运行时动态加载</strong></li></ul><p><strong>import</strong></p><ul><li>不管是基础（复杂）数据类型，都只是对该变量的动态只读引用。动态在于一个模块中变量的变化会影响到另一个模块；只读在于从某个模块引入一个变量时，不允许修改该变量的值。对于复杂数据类型，可以添加属性和方法，但是不允许指向另一个内存空间。</li><li>出现模块之间的循环引用时，只要模块存在某个引用，代码就能够执行</li><li><strong>import/export 是静态编译</strong></li></ul><h2 id="_3-node-模块" tabindex="-1"><a class="header-anchor" href="#_3-node-模块" aria-hidden="true">#</a> 3.node 模块</h2><h3 id="_3-1-fs-模块" tabindex="-1"><a class="header-anchor" href="#_3-1-fs-模块" aria-hidden="true">#</a> 3.1 FS 模块</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span> <span class="token comment">//引入fs模块</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h5 id="_3-1-1-写入文件" tabindex="-1"><a class="header-anchor" href="#_3-1-1-写入文件" aria-hidden="true">#</a> 3.1.1 写入文件</h5><table><thead><tr><th>API</th><th>说明</th></tr></thead><tbody><tr><td>writeFile / writeFileSync</td><td>异步写入</td></tr><tr><td>appendFile / appendFileSync</td><td>追加写入</td></tr><tr><td>createWriteStream</td><td>流式写入</td></tr></tbody></table><blockquote><p>fs.writeFile / appendFile (file, data[, options], callback)</p><p>fs.writeFileSync / appendFileSync (file,data[, options])</p></blockquote><ul><li><p>file 文件名</p></li><li><p>data 待写入的数据</p></li><li><p>options 选项设置 （可选） <strong>flag</strong> 打开文件使用的操作类型 <strong>&#39;w&#39; 覆盖 &#39;a&#39; 追加</strong></p><p><strong>encoding</strong> 写入文件的字符编码。默认为 <strong>&#39;utf8&#39;</strong></p><p><strong>mode</strong> 创建文件时的文件模式。默认是 <strong>0o666</strong></p></li><li><p>callback 写入回调</p></li></ul><p>需要注意的是，在使用上述方法时，如果指定了 <code>encoding</code> 参数，则 data 必须是字符串类型，否则将抛出异常。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//将 『三人行，必有我师焉。』 写入到当前文件夹下的『座右铭.txt』文件中</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#39;./座右铭.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;三人行，必有我师焉。&#39;</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//如果写入失败，则回调函数调用时，会传入错误对象，如写入成功，会传入 null</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;写入成功&#39;</span><span class="token punctuation">)</span>；
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>fs.createWriteStream(path[, options])</p></blockquote><ul><li><p>path 文件路径</p></li><li><p>options 选项配置（ 可选 ）</p><p><strong>flag</strong> 打开文件使用的操作类型 <strong>&#39;w&#39; 覆盖 &#39;a&#39; 追加</strong></p><p><strong>encoding</strong> 写入文件的字符编码。默认为 <strong>&#39;utf8&#39;</strong></p><p><strong>mode</strong> 创建文件时的文件模式。默认是 <strong>0o666</strong></p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&#39;./观书有感.txt&#39;</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;半亩方塘一鉴开\r\n&#39;</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;天光云影共徘徊\r\n&#39;</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;问渠那得清如许\r\n&#39;</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;为有源头活水来\r\n&#39;</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_3-1-2-读取文件" tabindex="-1"><a class="header-anchor" href="#_3-1-2-读取文件" aria-hidden="true">#</a> 3.1.2 读取文件</h5><table><thead><tr><th>API</th><th>说明</th></tr></thead><tbody><tr><td>readFile / readFileSync</td><td>异步读取 / 同步读取</td></tr><tr><td>createReadStream</td><td>流式读取</td></tr></tbody></table><blockquote><p>fs.readFile(path[, options], callback)</p></blockquote><p><strong>返回值 undefined</strong></p><blockquote><p>fs.readFileSync(path[, options])</p></blockquote><p><strong>返回值 string | Buffer</strong></p><ul><li>path 文件路径</li><li>options 表示以什么编码格式来读取文件。</li><li>callback 读取回调</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;./座右铭.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">//文件数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> data2 <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./座右铭.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>fs.createReadStream(path[, options])</p></blockquote><ul><li><p>path 文件路径</p></li><li><p>options 表示以什么编码格式来读取文件。</p><p><strong>返回值 Object</strong></p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//创建读取流对象</span>
<span class="token keyword">let</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&#39;./观书有感.txt&#39;</span><span class="token punctuation">)</span>
<span class="token comment">//每次取出 64k 数据后执行一次 data 回调</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//读取完毕后, 执行 end 回调</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;读取完成&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="_3-1-3-复制文件" tabindex="-1"><a class="header-anchor" href="#_3-1-3-复制文件" aria-hidden="true">#</a> 3.1.3 复制文件</h5><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
<span class="token comment">//第一种方法</span>
<span class="token keyword">const</span> file <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./path&#39;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./path1&#39;</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span>

<span class="token comment">// 第二种方法  比较好 所占用的内存空间少</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&#39;./path&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&#39;./path1&#39;</span><span class="token punctuation">)</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 简写  rs.pipe(ws)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="_3-1-4-文件重命名-文件移动" tabindex="-1"><a class="header-anchor" href="#_3-1-4-文件重命名-文件移动" aria-hidden="true">#</a> 3.1.4 文件重命名 / 文件移动</h5><table><thead><tr><th>API</th><th>说明</th></tr></thead><tbody><tr><td>rename / renameSync</td><td>重命名 / 同步重命名</td></tr></tbody></table><blockquote><p>fs.rename(oldPath, newPath, callback)</p><p>fs.renameSync(oldPath, newPath)</p></blockquote><ul><li>oldPath 文件当前的路径</li><li>newPath 文件新的路径</li><li>callback 操作后的回调</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">&#39;./观书有感.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./论语/观书有感.txt&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;移动完成&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">renameSync</span><span class="token punctuation">(</span><span class="token string">&#39;./座右铭.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;./论语/我的座右铭.txt&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_3-1-5-删除文件" tabindex="-1"><a class="header-anchor" href="#_3-1-5-删除文件" aria-hidden="true">#</a> 3.1.5 删除文件</h5><table><thead><tr><th>API</th><th>说明</th></tr></thead><tbody><tr><td>unlink / unlinkSync</td><td>删除文件 / 同步删除文件</td></tr><tr><td>rm / rmSync</td><td>删除文件或文件夹 / 同步删除文件或文件夹</td></tr></tbody></table><blockquote><p>fs.unlink(path, callback)</p><p>fs.unlinkSync(path)</p><p>fs.rm(path,[, options],callback)</p><p>fs.rmSync(path,[, options])</p></blockquote><ul><li><p>path 文件路径</p></li><li><p>options</p><ul><li><p><strong>force</strong> 当为 <code>true</code> 时，如果 <code>path</code> 不存在，则异常将被忽略。 默认值 <strong>false</strong>。</p><p><strong>recursive</strong> 是否允许递归创建 默认<strong>false</strong></p><p><strong>maxRetries</strong> 它是一个整数值，它指定 Node.js 由于任何错误而失败时将尝试执行该操作的次数。在给定的重试延迟后执行操作。如果递归选项未设置为 true，则忽略此选项。默认值为<strong>0</strong></p><p><strong>retryDelay</strong> 它是一个整数值，它指定重试操作之前的等待时间(以毫秒为单位)。如果递归选项未设置为 true，则忽略此选项。默认值为<strong>100 毫秒</strong></p></li></ul></li><li><p>callback 操作后的回调</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">&#39;./test.txt&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;删除成功&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token string">&#39;./test2.txt&#39;</span><span class="token punctuation">)</span>
<span class="token comment">//</span>
fs<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">&#39;./test.txt&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;删除成功&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">rmSync</span><span class="token punctuation">(</span><span class="token string">&#39;./test2.txt&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="_3-1-6-文件夹操作" tabindex="-1"><a class="header-anchor" href="#_3-1-6-文件夹操作" aria-hidden="true">#</a> 3.1.6 <strong>文件夹操作</strong></h5><table><thead><tr><th>API</th><th>说明</th></tr></thead><tbody><tr><td>mkdir / mkdirSync</td><td>创建文件夹</td></tr><tr><td>readdir / readdirSync</td><td>读取文件夹</td></tr><tr><td>rmdir / rmdirSync</td><td>删除文件夹</td></tr></tbody></table><p><strong>创建文件夹</strong></p><blockquote><p>fs.mkdir(path[, options], callback)</p><p>fs.mkdirSync(path[, options])</p></blockquote><ul><li><p>path 文件夹路径</p></li><li><p>options 选项配置（ 可选 ） <strong>recursive</strong> 是否允许递归创建 默认<strong>false</strong></p><p><strong>mode</strong> 用于设置目录权限，默认情况下为<strong>0777。它是 String 或 Number</strong></p></li><li><p>callback 操作后的回调</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">&#39;./page&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;创建成功&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//递归异步创建</span>
fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">&#39;./1/2/3&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;递归创建成功&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//递归同步创建文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span><span class="token string">&#39;./x/y/z&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>读取文件夹</strong></p><blockquote><p>fs.readdir(path[, options], callback)</p><p>fs.readdirSync(path[, options])</p></blockquote><ul><li><p>path 文件夹路径</p></li><li><p>options 选项配置（ 可选 ）</p><p><strong>encoding</strong> 指定给回调参数指定的文件名使用哪种编码。默认值 <strong>utf8</strong></p><p>**withFileTypes:**这是一个布尔值，它指定是否将文件作为 fs.Dirent 对象返回。默认值 <strong>false</strong></p></li><li><p>callback 操作后的回调</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//异步读取</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">&#39;./论语&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//同步读取</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token string">&#39;./论语&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>删除文件夹</strong></p><blockquote><p>fs.rmdir(path[, options], callback)</p><p>fs.rmdirSync(path[, options])</p></blockquote><ul><li><p>path 文件夹路径</p></li><li><p>options 选项配置（ 可选 ）</p><p><strong>recursive</strong> 是否允许递归创建 默认<strong>false</strong> <strong>已弃用。</strong></p><p><strong>maxRetries</strong> 它是一个整数值，它指定 Node.js 由于任何错误而失败时将尝试执行该操作的次数。在给定的重试延迟后执行操作。如果递归选项未设置为 true，则忽略此选项。默认值为<strong>0</strong></p><p><strong>retryDelay</strong> 它是一个整数值，它指定重试操作之前的等待时间(以毫秒为单位)。如果递归选项未设置为 true，则忽略此选项。默认值为<strong>100 毫秒</strong></p></li><li><p>callback 操作后的回调</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//异步删除文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&#39;./page&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;删除成功&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//异步递归删除文件夹 不建议使用</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">&#39;./1&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;递归删除&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//同步递归删除文件夹  不建议使用</span>
fs<span class="token punctuation">.</span><span class="token function">rmdirSync</span><span class="token punctuation">(</span><span class="token string">&#39;./x&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 建议使用</span>
fs<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">&#39;./x&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="_3-1-7-查看文件状态" tabindex="-1"><a class="header-anchor" href="#_3-1-7-查看文件状态" aria-hidden="true">#</a> 3.1.7 查看文件状态</h5><table><thead><tr><th>API</th><th>说明</th></tr></thead><tbody><tr><td>stat / statSync</td><td>查看文件状态</td></tr></tbody></table><blockquote><p>fs.stat(path[, options], callback)</p><p>fs.statSync(path[, options])</p></blockquote><ul><li>path 文件夹路径</li><li>options 选项配置（ 可选 ）</li><li>callback 操作后的回调</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//异步获取状态</span>
fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">&#39;./data.txt&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  data<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//判断是不是文件</span>
  data<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//判断是不是文件夹</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//同步获取状态</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">&#39;./data.txt&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// size 文件体积</span>
<span class="token comment">// birthtime 创建时间</span>
<span class="token comment">// mtime 最后修改时间</span>
<span class="token comment">// isFile 检测是否为文件</span>
<span class="token comment">// isDirectory 检测是否为文件夹</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_3-1-8-相对路径问题" tabindex="-1"><a class="header-anchor" href="#_3-1-8-相对路径问题" aria-hidden="true">#</a> 3.1.8 <strong>相对路径问题</strong></h4><p>fs 模块对资源进行操作时，路径的写法有两种：</p><p><strong>相对路径</strong></p><ul><li>./座右铭.txt 当前目录下的座右铭.txt</li><li>座右铭.txt 等效于上面的写法</li><li>../座右铭.txt 当前目录的上一级目录中的座右铭.txt</li></ul><p><strong>绝对路径</strong></p><ul><li>D:/Program Files windows 系统下的绝对路径</li><li>/usr/bin Linux 系统下的绝对路径</li></ul><blockquote><p>相对路径中所谓的 当前目录 ，指的是 命令行的工作目录 ，而并非是文件的所在目录</p><p>所以当命令行的工作目录与文件所在目录不一致时，会出现一些 BUG</p></blockquote><p><strong>__dirname</strong></p><p><strong>__dirname</strong> 保存着 当前文件所在目录的绝对路径 ，可以<strong>使用 dirname 与文件名拼接成绝对路径</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&#39;/data.txt&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>使用 fs 模块的时候，尽量使用 __dirname 将路径转化为绝对路径，这样可以避免相对路径产生的 Bug</p></blockquote><h3 id="_3-2-path-模块" tabindex="-1"><a class="header-anchor" href="#_3-2-path-模块" aria-hidden="true">#</a> 3.2 path 模块</h3><table><thead><tr><th>API</th><th>说明</th></tr></thead><tbody><tr><td>path.resolve</td><td>拼接规范的绝对路径 <strong>常用</strong></td></tr><tr><td>path.sep</td><td>获取操作系统的路径分隔符 (window 为 \ Linux 为 / )</td></tr><tr><td>path.parse</td><td>解析路径并返回对象</td></tr><tr><td>path.basename</td><td>获取路径的基础名称</td></tr><tr><td>path.dirname</td><td>获取路径的目录名</td></tr><tr><td>path.extname</td><td>获得路径的扩展名</td></tr></tbody></table><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
<span class="token comment">//获取路径分隔符</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>sep<span class="token punctuation">)</span>
<span class="token comment">//拼接绝对路径</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//解析路径</span>
<span class="token keyword">let</span> pathname <span class="token operator">=</span> <span class="token string">&#39;D:/program file/nodejs/node.exe&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//获取路径基础名称</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//获取路径的目录名</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//获取路径的扩展名</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-3-http-模块" tabindex="-1"><a class="header-anchor" href="#_3-3-http-模块" aria-hidden="true">#</a> 3.3 http 模块</h3><h4 id="_3-3-1-创建-http-模块" tabindex="-1"><a class="header-anchor" href="#_3-3-1-创建-http-模块" aria-hidden="true">#</a> 3.3.1 创建 http 模块</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//创建一个http服务</span>
<span class="token comment">//1. 导入 http 模块</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// request 意为请求. 是对请求报文的封装对象, 通过 request 对象可以获得请求报文的数据</span>
<span class="token comment">// response 意为响应. 是对响应报文的封装对象, 通过 response 对象可以设置响应报文</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;响应体&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//2. 启动服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;请求成功&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>如果使用的是默认的端口号,请求的时候可以不用添加端口</p><p><strong>HTTP 协议默认端口是 80 。HTTPS 协议的默认端口是 443</strong>, HTTP 服务开发常用端口有 3000，8080，8090，9000 等</p></blockquote><h4 id="_3-3-2-获取-http-请求报文" tabindex="-1"><a class="header-anchor" href="#_3-3-2-获取-http-请求报文" aria-hidden="true">#</a> 3.3.2 <strong>获取</strong> <strong>HTTP</strong> 请求报文</h4><table><thead><tr><th style="text-align:center;">API</th><th>作用</th><th style="text-align:center;">重点</th></tr></thead><tbody><tr><td style="text-align:center;">request.method</td><td>请求方法</td><td style="text-align:center;"><strong>*</strong></td></tr><tr><td style="text-align:center;">request.url <strong>(只包含路径和查询字符串)</strong></td><td>请求路径</td><td style="text-align:center;"><strong>*</strong></td></tr><tr><td style="text-align:center;">require(&#39;url&#39;).parse(request.url).pathname</td><td>URL 路径</td><td style="text-align:center;"><strong>*</strong></td></tr><tr><td style="text-align:center;">require(&#39;url&#39;).parse(request.url, true).query</td><td>URL 查询字符串</td><td style="text-align:center;"><strong>*</strong></td></tr><tr><td style="text-align:center;">request.headers</td><td>请求头</td><td style="text-align:center;"><strong>*</strong></td></tr><tr><td style="text-align:center;">request.httpVersion</td><td>请求版本</td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">request.on(&#39;data&#39;, fn)<strong>用来获取消息体</strong> request.on(&#39;end&#39;, fn) <strong>用来拼接消息体</strong></td><td>请求体</td><td style="text-align:center;"></td></tr></tbody></table><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> body
  request<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chuck</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// chuck是一个bolb流</span>
    body <span class="token operator">+=</span> chuck
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  request<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//querystring.parse(str, 分隔符, 赋值符, 可接受字符串的最大长度，默认为1000)，将字符串转成对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_3-3-3-引入-url-模块解析地址" tabindex="-1"><a class="header-anchor" href="#_3-3-3-引入-url-模块解析地址" aria-hidden="true">#</a> 3.3.3 引入 url 模块解析地址</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 第二个参数 是是否把query转化成对象</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token comment">//路径</span>
  res<span class="token punctuation">.</span>pathname
  <span class="token comment">//查询字符串</span>
  res<span class="token punctuation">.</span>query<span class="token punctuation">[</span><span class="token string">&#39;想查询的字符&#39;</span><span class="token punctuation">]</span>
  response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;结束&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//或者使用URL类  推荐</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1&#39;</span><span class="token punctuation">)</span>
  response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;结束&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_3-3-4-设置-http-响应报文" tabindex="-1"><a class="header-anchor" href="#_3-3-4-设置-http-响应报文" aria-hidden="true">#</a> 3.3.4 <strong>设置</strong> <strong>HTTP</strong> <strong>响应报文</strong></h4><table><thead><tr><th style="text-align:center;">API</th><th>作用</th></tr></thead><tbody><tr><td style="text-align:center;">response.statusCode</td><td>设置响应状态码</td></tr><tr><td style="text-align:center;">response.statusMessage （ 用的非常少 ）</td><td>设置响应状态描述</td></tr><tr><td style="text-align:center;">response.setHeader(&#39;头名&#39;, &#39;头值&#39;)</td><td>设置响应头信息</td></tr><tr><td style="text-align:center;">response.writeHead(&#39;状态码&#39;,{&#39;头名&#39;, &#39;头值&#39;})</td><td>设置响应头信息**(只能一次)**</td></tr><tr><td style="text-align:center;">response.write(&#39;xx&#39;)</td><td>设置响应体</td></tr><tr><td style="text-align:center;">response.end(&#39;xxx&#39;)</td><td>设置响应体**(最终只能有一个执行)**</td></tr></tbody></table><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>write 和 end 的两种使用情况：
<span class="token comment">//1. write 和 end 的结合使用 响应体相对分散</span>
response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;xx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;xx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;xx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//每一个请求，在处理的时候必须要执行 end 方法的</span>
<span class="token comment">//2. 单独使用 end 方法 响应体相对集中</span>
response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-3-5-网页资源的基本加载过程" tabindex="-1"><a class="header-anchor" href="#_3-3-5-网页资源的基本加载过程" aria-hidden="true">#</a> 3.3.5 <strong>网页资源的基本加载过程</strong></h4><p>网页资源的加载都是循序渐进的**，首先获取 HTML 的内容， 然后解析 HTML 在发送其他资源的请求**，如 CSS，Javascript，图片等。 理解了这个内容对于后续的学习与成长有非常大的帮助</p><h4 id="_3-3-6-静态资源服务" tabindex="-1"><a class="header-anchor" href="#_3-3-6-静态资源服务" aria-hidden="true">#</a> 3.3.6 <strong>静态资源服务</strong></h4><ul><li>静态资源是指 内容长时间不发生改变的资源 ，例如图片，视频，CSS 文件，JS 文件，HTML 文件，字体文件等</li><li>动态资源是指 内容经常更新的资源 ，例如百度首页，网易首页，京东搜索列表页面等</li></ul><h4 id="_3-3-7-网页中的-url" tabindex="-1"><a class="header-anchor" href="#_3-3-7-网页中的-url" aria-hidden="true">#</a> 3.3.7 <strong>网页中的</strong> <strong>URL</strong></h4><p>网页中的 URL 主要分为两大类：<strong>相对路径与绝对路径</strong></p><blockquote><p><strong>绝对路径</strong></p></blockquote><p>绝对路径可靠性强，而且相对容易理解，在项目中运用较多</p><table><thead><tr><th><strong>形式</strong></th><th><strong>特点</strong></th></tr></thead><tbody><tr><td>https://baidu.com</td><td>直接向目标资源发送请求，容易理解。网站的外链会用到此形式</td></tr><tr><td>//baidu.com/search</td><td>与页面 URL 的协议拼接形成完整 URL 再发送请求。大型网站用的比较多</td></tr><tr><td>/search</td><td>与页面 URL 的协议、主机名、端口拼接形成完整 URL 再发送请求。中小型</td></tr></tbody></table><blockquote><p><strong>相对路径</strong></p></blockquote><p>相对路径在发送请求时，需要与当前页面 URL 路径进行 计算 ，得到完整 URL 后，再发送请求，学习阶段用的较多</p><p>当前网站为 https://baidu.com/search/index.html</p><table><thead><tr><th><strong>形式</strong></th><th><strong>最终的</strong> <strong>URL</strong></th></tr></thead><tbody><tr><td>./css/app.css</td><td>https://baidu.com/search/css/app.css</td></tr><tr><td>js/app.js</td><td>https://baidu.com/search/js/app.js</td></tr><tr><td>../img/logo.png</td><td>https://baidu.com/img/logo.png</td></tr><tr><td>../../mp4/show.mp4</td><td>https://baidu.com/mp4/show.mp4 (因为上上层没有文件夹了)</td></tr></tbody></table><h4 id="_3-3-8-设置资源类型-mime-类型" tabindex="-1"><a class="header-anchor" href="#_3-3-8-设置资源类型-mime-类型" aria-hidden="true">#</a> 3.3.8 <strong>设置资源类型（mime 类型）</strong></h4><p>媒体类型（通常称为 Multipurpose Internet Mail Extensions 或 MIME 类型 ）是一种标准，用来表示文档、文件或字节流的性质和格式。</p><blockquote><p>mime 类型结构： [type]/[subType]</p><p>例如： text/html text/css image/jpeg image/png application/json</p></blockquote><p>HTTP 服务可以设置响应头 Content-Type 来表明响应体的 MIME 类型，浏览器会根据该类型决定如何处理资源</p><p><strong>常见文件对应的 mime 类型</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token string">&#39;text/html&#39;</span><span class="token punctuation">,</span>
<span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token string">&#39;text/css&#39;</span><span class="token punctuation">,</span>
<span class="token literal-property property">js</span><span class="token operator">:</span> <span class="token string">&#39;text/javascript&#39;</span><span class="token punctuation">,</span>
<span class="token literal-property property">png</span><span class="token operator">:</span> <span class="token string">&#39;image/png&#39;</span><span class="token punctuation">,</span>
<span class="token literal-property property">jpg</span><span class="token operator">:</span> <span class="token string">&#39;image/jpeg&#39;</span><span class="token punctuation">,</span>
<span class="token literal-property property">gif</span><span class="token operator">:</span> <span class="token string">&#39;image/gif&#39;</span><span class="token punctuation">,</span>
<span class="token literal-property property">mp4</span><span class="token operator">:</span> <span class="token string">&#39;video/mp4&#39;</span><span class="token punctuation">,</span>
<span class="token literal-property property">mp3</span><span class="token operator">:</span> <span class="token string">&#39;audio/mpeg&#39;</span><span class="token punctuation">,</span>
<span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>对于未知的资源类型，可以选择 <strong>application/octet-stream</strong> 类型，浏览器在遇到该类型的响应时，会对响应体内容进行独立存储，也就是我们常见的 下载 效果</p></blockquote><h4 id="_3-3-9-get-和-post-请求区别" tabindex="-1"><a class="header-anchor" href="#_3-3-9-get-和-post-请求区别" aria-hidden="true">#</a> 3.3.9 <strong>GET</strong> <strong>和</strong> <strong>POST</strong> 请求区别</h4><ol><li>GET 和 POST 是 HTTP 协议请求的两种方式。</li><li>GET 主要用来获取数据，POST 主要用来提交数据</li><li>GET 带参数请求是将参数缀到 URL 之后，在地址栏中输入 url 访问网站就是 GET 请求，</li><li>POST 带参数请求是将参数放到请求体中</li><li>POST 请求相对 GET 安全一些，因为在浏览器中参数会暴露在地址栏</li><li>GET 请求<strong>大小有限制</strong>，一般为 2K，而 POST 请求则没有大小限制</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//DEMO</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span>
http
  <span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//获取请求的方法已经路径</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> url<span class="token punctuation">,</span> method <span class="token punctuation">}</span> <span class="token operator">=</span> request
    <span class="token comment">//文件夹路径</span>
    <span class="token keyword">let</span> rootDir <span class="token operator">=</span> __dirname <span class="token operator">+</span> <span class="token string">&#39;/public&#39;</span>
    <span class="token comment">//拼接文件路径</span>
    <span class="token keyword">let</span> filePath <span class="token operator">=</span> rootDir <span class="token operator">+</span> url
    <span class="token comment">//读取文件内容</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//判断</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//如果出现错误，响应404状态码</span>
        response<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">404</span>
        response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//响应文件内容</span>
        response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;80端口正在启动中....&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_3-4-模块化" tabindex="-1"><a class="header-anchor" href="#_3-4-模块化" aria-hidden="true">#</a> 3.4 模块化</h3><h4 id="_3-4-1-什么是模块化与模块" tabindex="-1"><a class="header-anchor" href="#_3-4-1-什么是模块化与模块" aria-hidden="true">#</a> <strong>3.4.1</strong> <strong>什么是模块化与模块</strong></h4><p>将一个复杂的程序文件依据一定规则（规范）拆分成多个文件的过程称之为 <strong>模块化</strong></p><p>其中拆分出的 <strong>每个文件就是一个模块</strong> ，模块的内部数据是私有的，不过模块可以暴露内部数据以便其他模块使用</p><h4 id="_3-4-2-模块暴露数据" tabindex="-1"><a class="header-anchor" href="#_3-4-2-模块暴露数据" aria-hidden="true">#</a> 3.4.2 <strong>模块暴露数据</strong></h4><blockquote><p>module.exports = value</p><p>exports.name = value</p></blockquote><p><strong>注意事项:</strong></p><ul><li>不能使用 exports = value 的形式暴露数据</li><li>模块内部 module 与 exports 的隐式关系 exports = module.exports = {} ，require 返回的是目标模块中 module.exports 的值</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//声明函数</span>
<span class="token keyword">function</span> <span class="token function">tiemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;贴膜....&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//暴露方法1</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> tiemo
<span class="token comment">//暴露方法2</span>
exports<span class="token punctuation">.</span>tiemo <span class="token operator">=</span> tiemo
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-4-3-导入-引入-模块" tabindex="-1"><a class="header-anchor" href="#_3-4-3-导入-引入-模块" aria-hidden="true">#</a> 3.4.3 <strong>导入（引入）模块</strong></h4><p>在模块中使用 require 传入文件路径即可引入文件</p><p><strong>注意事项:</strong></p><ul><li><p>对于自己创建的模块，导入时路径建议写 相对路径 ，且不能省略 ./ 和 ../</p></li><li><p>js 和 json 文件导入时可以不用写后缀，c/c++编写的 node 扩展文件也可以不写后缀，但是一般用不到</p></li><li><p>如果导入其他类型的文件，会以 js 文件进行处理</p></li><li><p>如果导入的路径是个文件夹，则会 首先 检测该文件夹下 <strong>package.json 文件中 main</strong> 属性对应的文件，如果存在则导入，反之如果文件不存在会报错。</p><p>如果 main 属性不存在，或者 package.json 不存在，则会尝试导入文件夹下的 index.js 和 index.json ，如果还是没找到，就会报错</p></li><li><p>导入 node.js 内置模块时，直接 require 模块的名字即可，无需加 ./ 和 ../</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> demo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./demo.js&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//package.json</span>
<span class="token comment">//{</span>
<span class="token comment">//    main:&#39;./index.js&#39;</span>
<span class="token comment">//}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_3-4-4-导入模块的基本流程" tabindex="-1"><a class="header-anchor" href="#_3-4-4-导入模块的基本流程" aria-hidden="true">#</a> 3.4.4 <strong>导入模块的基本流程</strong></h4><ol><li>将相对路径转为绝对路径，定位目标文件</li><li>缓存检测</li><li>读取目标文件代码</li><li>包裹为一个函数并执行（自执行函数）。(通过 arguments.callee.toString() 查看自执行函数)</li><li>缓存模块的值</li><li>返回 module.exports 的值</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">require</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fileUrl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// fileUrl是我们传入的路径参数</span>
  <span class="token comment">// 1.路径分析并定位到文件</span>
  <span class="token keyword">const</span> filePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> fileUrl<span class="token punctuation">)</span>

  <span class="token comment">// 2.判断模块是否加载过(缓存判断)</span>
  <span class="token keyword">const</span> cachedModule <span class="token operator">=</span> cache<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>cachedModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> cachedModule
  <span class="token punctuation">}</span>
  <span class="token comment">// 3.读取目标文件代码</span>
  <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token function">readFileSync</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 4.包裹为一个函数并执行（自执行函数）</span>
  <span class="token keyword">let</span> module <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">let</span> exports <span class="token operator">=</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> module<span class="token punctuation">,</span> Require<span class="token punctuation">,</span> __dirname<span class="token punctuation">,</span> __filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>
    exports<span class="token punctuation">,</span>
    module<span class="token punctuation">,</span>
    Require<span class="token punctuation">,</span>
    __dirname<span class="token punctuation">,</span>
    __filename
  <span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// 5.缓存模块的值</span>
  <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="_4-包管理工具" tabindex="-1"><a class="header-anchor" href="#_4-包管理工具" aria-hidden="true">#</a> 4.包管理工具</h2><h3 id="_4-1-包是什么" tabindex="-1"><a class="header-anchor" href="#_4-1-包是什么" aria-hidden="true">#</a> 4.1 包是什么</h3><p>『包』英文单词是 package ，代表了一组特定功能的源码集合</p><p>管理『包』的应用软件，可以对「包」进行 下载安装 ， 更新 ， 删除 ， 上传 等操作</p><p>借助包管理工具，可以快速开发项目，提升开发效率</p><p>包管理工具是一个通用的概念，很多编程语言都有包管理工具，所以 掌握好包管理工具非常重要</p><h3 id="_4-2-常用的包管理工具" tabindex="-1"><a class="header-anchor" href="#_4-2-常用的包管理工具" aria-hidden="true">#</a> 4.2 <strong>常用的包管理工具</strong></h3><ul><li><p>Yarn：是一个快速、可靠、安全的包管理器，使用并行下载技术加快依赖项的安装速度。yarn.lock 文件确保每个开发人员或团队使用相同的依赖版本。Yarn 具有离线模式和语义版本控制，可以更好地管理依赖关系。</p></li><li><p>npm：是 Node.js 的默认包管理工具，安装速度较慢，但是 npm registry 是全球最大的开源软件库之一。NPM 8 改进了安装体验，支持与 Pika 对接，可以在不向 registry 发送请求的情况下下载包。</p></li><li><p>pnpm：与 Yarn 类似，也是一个快速、可靠、节省空间的包管理器，最大的特点是采用符号链接来安装依赖包，避免安装多个相同的包浪费存储空间。</p></li></ul><h3 id="_4-3-项目初始化" tabindex="-1"><a class="header-anchor" href="#_4-3-项目初始化" aria-hidden="true">#</a> 4.3 项目初始化</h3><p>npm init 命令的作用是将文件夹初始化为一个『包』， 交互式创建 package.json 文件</p><p>package.json 是包的配置文件，每个包都必须要有 package.json</p><p>package.json 内容示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
<span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;01_npm&quot;</span><span class="token punctuation">,</span>    #包的名字
<span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>  #包的版本
<span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>   #包的描述
<span class="token string-property property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>  #包的入口文件
<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>         #脚本配置
<span class="token string-property property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string-property property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>        #作者
<span class="token string-property property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span>     #开源证书
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>初始化的过程中还有一些注意事项：</p><ol><li><p>package name ( 包名 ) 不能使用中文、大写，默认值是 文件夹的名称 ，所以文件夹名称也不能使用中文和大写</p></li><li><p>version ( 版本号 )要求 x.x.x 的形式定义， x 必须是数字，默认值是 1.0.0</p></li><li><p>ISC 证书与 MIT 证书功能上是相同的，关于开源证书扩展阅读<strong>http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html</strong></p></li><li><p>package.json 可以手动创建与修改</p></li><li><p>使用 npm init -y 或者 npm init --yes 极速创建 package.json</p></li></ol></blockquote><h3 id="_4-4-生产环境与开发环境" tabindex="-1"><a class="header-anchor" href="#_4-4-生产环境与开发环境" aria-hidden="true">#</a> 4.4 <strong>生产环境与开发环境</strong></h3><p>我们可以在安装时设置选项来区分 依赖的类型 ，目前分为两类：</p><table><thead><tr><th><strong>类型</strong></th><th>命令</th><th>补充</th></tr></thead><tbody><tr><td>生产依赖</td><td>npm i -S vue npm i --save vue</td><td>-S 等效于 --save， -S 是默认选项 包信息保存在 package.json 中 dependencies 属性</td></tr><tr><td>开发依赖</td><td>npm i -D vue npm i --save-dev vue</td><td>-D 等效于 --save-dev 包信息保存在 package.json 中 devDependencies 属性</td></tr><tr><td>全局依赖</td><td>npm i -g vue</td><td></td></tr></tbody></table><h2 id="_5-nvm" tabindex="-1"><a class="header-anchor" href="#_5-nvm" aria-hidden="true">#</a> 5.NVM</h2><p>nvm 全称 Node Version Manager 顾名思义它是用来管理 node 版本的工具，方便切换不同版本的 Node.js</p><h3 id="_5-1-常用命令" tabindex="-1"><a class="header-anchor" href="#_5-1-常用命令" aria-hidden="true">#</a> 5.1 <strong>常用命令</strong></h3><table><thead><tr><th><strong>命令</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>nvm list available</td><td>显示所有可以下载的 Node.js 版本</td></tr><tr><td>nvm list</td><td>显示已安装的版本</td></tr><tr><td>nvm install 18.12.1</td><td>安装 18.12.1 版本的 Node.js</td></tr><tr><td>nvm install latest</td><td>安装最新版的 Node.js</td></tr><tr><td>nvm uninstall 18.12.1</td><td>删除某个版本的 Node.js</td></tr><tr><td>nvm use 18.12.1</td><td>切换 18.12.1 的 Node.js</td></tr></tbody></table><h2 id="_6-会话控制" tabindex="-1"><a class="header-anchor" href="#_6-会话控制" aria-hidden="true">#</a> 6.<strong>会话控制</strong></h2><h3 id="_6-1-介绍" tabindex="-1"><a class="header-anchor" href="#_6-1-介绍" aria-hidden="true">#</a> 6.1 介绍</h3><p>所谓会话控制就是 对会话进行控制 HTTP 是一种无状态的协议，它没有办法区分多次的请求是否来自于同一个客户端， 无法区分用户而产品中又大量存在的这样的需求，所以我们需要通过 会话控制 来解决该问题</p><p>常见的会话控制技术有三种：</p><ul><li>cookie</li><li>session</li><li>token</li></ul><h2 id="_6-2-cookie" tabindex="-1"><a class="header-anchor" href="#_6-2-cookie" aria-hidden="true">#</a> 6.2 <strong>cookie</strong></h2><h3 id="_6-2-1-cookie-是什么" tabindex="-1"><a class="header-anchor" href="#_6-2-1-cookie-是什么" aria-hidden="true">#</a> 6.2.1 cookie 是什么</h3><p>cookie 是 HTTP 服务器发送到用户浏览器并保存在本地的一小块数据</p><p><strong>cookie 是保存在浏览器端的一小块数据</strong></p><p><strong>cookie 是按照域名划分保存的</strong></p><h3 id="_6-2-2-cookie-的特点" tabindex="-1"><a class="header-anchor" href="#_6-2-2-cookie-的特点" aria-hidden="true">#</a> 6.2.2 cookie <strong>的特点</strong></h3><p>浏览器向服务器发送请求时，会自动将 当前域名下 可用的 cookie 设置在请求头中，然后传递给服务器</p><p>这个请求头的名字也叫 cookie ，所以将 cookie 理解为一个 HTTP 的请求头也是可以的 有了 cookie 之后，后续向服务器发送请求时，就会自动携带 cookie</p><p><img src="/notes/image/cookie1.jpg" alt="cookie1"></p><p><img src="/notes/image/cookie2.jpg" alt="cookie2"></p><h3 id="_6-2-3-浏览器操作-cookie" tabindex="-1"><a class="header-anchor" href="#_6-2-3-浏览器操作-cookie" aria-hidden="true">#</a> 6.2.3 <strong>浏览器操作</strong> <strong>cookie</strong></h3><ol><li>禁用所有 cookie</li><li>删除 cookie</li><li>查看 cookie</li></ol><h2 id="_6-3-session" tabindex="-1"><a class="header-anchor" href="#_6-3-session" aria-hidden="true">#</a> 6.3 <strong>session</strong></h2><h3 id="_6-3-1-session-是什么" tabindex="-1"><a class="header-anchor" href="#_6-3-1-session-是什么" aria-hidden="true">#</a> 6.3.1 <strong>session</strong> <strong>是什么</strong></h3><p>session 是<strong>保存在服务器端</strong>的一块儿数据 ，保存当前访问用户的相关信息</p><h3 id="_6-3-2-session-的作用" tabindex="-1"><a class="header-anchor" href="#_6-3-2-session-的作用" aria-hidden="true">#</a> 6.3.2 <strong>session</strong> <strong>的作用</strong></h3><p>实现会话控制，可以识别用户的身份，快速获取当前用户的相关信息</p><h3 id="_6-3-3-session-运行流程" tabindex="-1"><a class="header-anchor" href="#_6-3-3-session-运行流程" aria-hidden="true">#</a> 6.3.3 <strong>session</strong> <strong>运行流程</strong></h3><p>填写账号和密码校验身份，校验通过后创建 session 信息 ，然后将 session_id 的值通过响应头返回给浏览器</p><p><img src="/notes/image/session1.jpg" alt="session1"></p><p>有了 cookie，下次发送请求时会自动携带 cookie，服务器通过 cookie 中的 session_id 的值确定用户的身份</p><p><img src="/notes/image/session2.jpg" alt="session2"></p><h2 id="_6-4-token" tabindex="-1"><a class="header-anchor" href="#_6-4-token" aria-hidden="true">#</a> 6.4 token</h2><h3 id="_6-4-1-token-是什么" tabindex="-1"><a class="header-anchor" href="#_6-4-1-token-是什么" aria-hidden="true">#</a> 6.4.1 token 是什么</h3><p>token 是服务端生成并返回给 HTTP 客户端的一串加密字符串， token 中保存着 用户信息</p><h3 id="_6-4-2-token-的作用" tabindex="-1"><a class="header-anchor" href="#_6-4-2-token-的作用" aria-hidden="true">#</a> 6.4.2 <strong>token</strong> <strong>的作用</strong></h3><p>实现会话控制，可以识别用户的身份，主要用于移动端 APP</p><h3 id="_6-4-3-token-的工作流程" tabindex="-1"><a class="header-anchor" href="#_6-4-3-token-的工作流程" aria-hidden="true">#</a> 6.4.3 <strong>token</strong> <strong>的工作流程</strong></h3><p>填写账号和密码校验身份，校验通过后响应 token，token 一般是在响应体中返回给客户端的</p><p><img src="/notes/image/token1.jpg" alt="token1"></p><p>后续发送请求时，需要手动将 token 添加在请求报文中，一般是放在请求头中</p><p><img src="/notes/image/token2.jpg" alt="token2"></p><h3 id="_6-5-区别和特点" tabindex="-1"><a class="header-anchor" href="#_6-5-区别和特点" aria-hidden="true">#</a> 6.5 区别和特点</h3><ol><li>存在的位置 <ul><li>cookie：浏览器端</li><li>session：服务器</li><li>token：浏览器端</li></ul></li><li>安全性 <ul><li>cookie 是以明文的方式存放在客户端的，安全性相对<strong>较低</strong></li><li>session 存放于服务器中，所以安全性相对<strong>较好</strong></li><li>token 是以加密的方式存放在客户端的，所以安全性 相对<strong>较好</strong></li></ul></li><li>网络传输量 <ul><li>cookie 设置内容过多会增大报文体积， 会影响传输效率</li><li>session 数据存储在服务器，只是通过 cookie 传递 id，所以不影响传输效率</li><li>token 内容一般为一串密文 不影响传输效率</li></ul></li><li>存储限制 <ul><li>浏览器限制单个 cookie 保存的数据不能超过 4K ，且单个域名下的存储数量也有限制</li><li>session 数据存储在服务器中，所以没有这些限制</li><li>token 一般存储在浏览器中 限制不大 并且更容易扩展</li></ul></li></ol><h2 id="_7-jwt" tabindex="-1"><a class="header-anchor" href="#_7-jwt" aria-hidden="true">#</a> 7.JWT</h2><p>JWT（JSON Web Token ）是目前最流行的跨域认证解决方案，可用于基于 token 的身份验证</p><p>JWT 使 token 的生成与校验更规范</p><p>我们可以使用 jsonwebtoken 包 来操作 token</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//导入 jsonwebtokan</span>
<span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;jsonwebtoken&#39;</span><span class="token punctuation">)</span>
<span class="token comment">//创建 token</span>
<span class="token comment">// jwt.sign(数据, 加密字符串, 配置对象)</span>
<span class="token keyword">let</span> token <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;zhangsan&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&#39;ces&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">expiresIn</span><span class="token operator">:</span> <span class="token number">60</span> <span class="token comment">//过期时间 单位是 秒</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
<span class="token comment">//解析 token</span>
jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token string">&#39;ces&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;校验失败~~&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="_8-域名" tabindex="-1"><a class="header-anchor" href="#_8-域名" aria-hidden="true">#</a> 8.域名</h2><p>在地址栏输入 域名 之后，浏览器会先进行 DNS（Domain Name System） 查询，获取该域名对应的 IP 地址</p><p>请求会发送到 DNS 服务器，可以 根据域名返回 IP 地址</p><p>可以通过 <strong>ipconfig /all</strong> 查看本机的 DNS 服务器</p><p>hosts 文件也可以设置域名与 IP 的映射关系，在发送请求前，可以通过该文件获取域名的 IP 地址</p><h3 id="_8-1本地域名" tabindex="-1"><a class="header-anchor" href="#_8-1本地域名" aria-hidden="true">#</a> 8.1<strong>本地域名</strong></h3><p>所谓本地域名就是 只能在本机使用的域名 ，一般在开发阶段使用</p><p>可以编辑文件 <strong>C:\Windows\System32\drivers\etc\hosts</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span> www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com
<span class="token comment">//修改后 www.baidu.com指向的就是127.0.0.1这个地址</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/notes/nodeNote/express.html" class="" aria-label="Express"><!--[--><!--]--> Express <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/notes/assets/app.a5197ba9.js" defer></script>
  </body>
</html>
